1.Project View


CREATE OR REPLACE VIEW V_PROJECT
(PROJECT_ID, PROJECT_NAME, REP_CONTENT, TARGET_AMOUNT, START_DATE, END_DATE, PAYMENT_DATE, REFUND_ROLE,
VIDEO_URL, CONTENT, PROJECT_CATEGORY_ID, PROJECT_CATEGORY_NAME, CATEGORY_SUB_ID, CATEGORY_SUB_NAME, CATEGORY_ID, CATEGORY_NAME, TOTAL_AMOUNT)
AS (SELECT P.PROJECT_ID AS PROJECT_ID, PROJECT_NAME, REP_CONTENT, TARGET_AMOUNT, START_DATE, END_DATE,
        PAYMENT_DATE, REFUND_ROLE, VIDEO_URL, CONTENT, P.PROJECT_CATEGORY_ID AS PROJECT_CATEGORY_ID, PROJECT_CATEGORY_NAME,
        P.CATEGORY_SUB_ID AS CATEGORY_SUB_ID, CATEGORY_SUB_NAME, CS.CATEGORY_ID AS CATEGORY_ID, CATEGORY_NAME
        ,(SELECT SUM(TOTAL_AMOUNT) FROM PAYMENT PA WHERE PA.PROJECT_ID = P.PROJECT_ID GROUP BY PROJECT_ID) AS TOTAL_AMOUNT
FROM PROJECT P
LEFT JOIN PROJECT_CONTENT CT ON(P.PROJECT_ID = CT.PROJECT_ID)
JOIN PROJECT_CATEGORY PC ON(P.PROJECT_CATEGORY_ID = PC.PROJECT_CATEGORY_ID)
JOIN CATEGORY_SUB CS ON(P.CATEGORY_SUB_ID = CS.CATEGORY_SUB_ID)
JOIN CATEGORY C ON(CS.CATEGORY_ID = C.CATEGORY_ID));


2 GIFT VIEW


CREATE OR REPLACE VIEW V_GIFT
(PROJECT_ID, PAYMENT_DATE, GIFT_ID, SUPPORT_PRICE, CAPACITY, ITEM_ID, ITEM_NAME, COUNT)
AS 
    SELECT P.PROJECT_ID, P.PAYMENT_DATE+7, G.GIFT_ID, G.SUPPORT_PRICE, G.CAPACITY, 
    I.ITEM_ID, I.ITEM_NAME, GI.COUNT
    FROM PROJECT P
    LEFT JOIN GIFT G ON(P.PROJECT_ID=G.PROJECT_ID)
    LEFT JOIN GIFT_IN_ITEMS GI ON(G.GIFT_ID=GI.GIFT_ID)
    LEFT JOIN ITEM I ON(GI.ITEM_ID=I.ITEM_ID)
    LEFT JOIN PAYMENT M ON(P.PROJECT_ID=M.PROJECT_ID)
    GROUP BY P.PROJECT_ID, P.PAYMENT_DATE+7, G.GIFT_ID, G.SUPPORT_PRICE, G.CAPACITY, 
    I.ITEM_ID, I.ITEM_NAME, GI.COUNT;



3 REPLY VIEW 



CREATE VIEW V_REPLY
(PROJECT_ID, PROJECT_REPLY_ID, MEMBER_ID, REPLY_CONTENT, CREATION_DATE,
REPLY_LEVEL, REPORT_COUNT)
AS(SELECT P.PROJECT_ID,PR.PROJECT_REPLY_ID,PR.MEMBER_ID,PR.REPLY_CONTENT,
PR.CREATION_DATE, PR.REPLY_LEVEL, PR.REPORT_COUNT
FROM PROJECT P 
LEFT JOIN PROJECT_REPLY PR ON(P.PROJECT_ID=PR.PROJECT_ID)
LEFT JOIN MEMBER M ON(PR.MEMBER_ID=M.MEMBER_ID));


4 SUPPOTER VIEW



CREATE VIEW V_SUPPOTER
(PROJECT_ID,MEMBER_ID,MEMBRER_NAME,PAYMENT_DATE,REFUND_FLAG)
AS
(SELECT P.PROJECT_ID, PM.MEMBER_ID, M.MEMBER_NAME, PM.PAYMENT_DATE, PM.REFUND_FLAG
FROM PROJECT P
LEFT JOIN PAYMENT PM ON(P.PROJECT_ID=PM.PROJECT_ID)
LEFT JOIN MEMBER M ON(PM.MEMBER_ID=M.MEMBER_ID));






5 MEMBER VIEW



CREATE VIEW V_MEMBER
(PROJECT_ID,MEMBER_ID,IMAGE_RENAME,MEMBER_NAME,EMAIL,CORN_GRADE)
AS
(SELECT P.PROJECT_ID, P.MEMBER_ID, P.IMAGE_RENAME,M.MEMBER_NAME,M.EMAIL, T.CORN_GRADE
FROM PROJECT P 
LEFT JOIN MEMBER M ON(P.MEMBER_ID=M.MEMBER_ID)
LEFT JOIN MEMBER_TRUST T ON(P.PROJECT_ID=T.PROJECT_ID));

SELECT * FROM V_MEMBER;